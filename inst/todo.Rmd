## TODO: 

- remove "rownames", from constructor/accessor/...
-  show. See `rowRanges` class.
  thoughts: use "key" column as the major column, all others as meta
  columns? or vice versa. How to do this under `tbl_dbi`? 
- realization methods: as.data.frame(), as(,"DataFrame")? 

- head(), tail()... ??
- numeric calculations, e.g., sum(), max(), min, row/colSums,
  row/colMeans, row/colMin, row/colMaxs, apply, ... need to define.

- `extractCOLS,SQLDataFrame`? 
- think about the "dbkey" slot... needed for all database table? must
  be unique identifier for all rows...
- left_join, reordering... `rbind,SQLDataFrame`? Maybe not, now one
  `SQLDataFrame` only corresponds to just one `tbl_dbi` object... Will
  there be any need for rbinding data from different database table?
- inst/test.db? only keep "colDatal" and rename as "colData"?? update
  testthat, examples...

- write out subsetted SQL table? 


## DONE

### always keep key() column, show as first column. 
- add additional slot `@includeKey = TRUE` by default.
- `dbkey()` returns key column name. `wheredbkey()` returns the
  positions of key column e.g., `match(dbkey(),
  colnames(SQLDataFrame))`. 
- update `colnames(SQLDataFrame)`, check if `@includeKey`.
- update `ncol(x)`, if `!x@includeKey`, return `nc-1`. 

- "[,SQLDataFrame" always keep key column in @indexes[[2]]. 
  - if `! wheredbkey(x) %in% j`: 
	- update `@indexes[[2]]` by adding `wheredbkey(x)`.
	- update `@includeKey` as FALSE. 
  - `[i,j]`, "j" should correspond to the original col orders. 

- "show, SQLDataFrame" Always show key column as first column. e.g.,
  "key | original columns...". **key column save once, show twice!**
  - `show`(don't show) key column after `|` if `@includeKey` is
    TRUE(FALSE). 
  - `.extract_tbl_from_SQLDataFrame` will always have key col in
  returned tbl. (no work needed)
  - `.extract_tbl_rows_by_key`, (no work)
  - `.printROWS`, print "key | original columns... ". check
    `@includeKey(x)` to see if print the key column after `|`.
  - `[j] list_style_subsetting` returns `SQLDataFrame`. show doesn't
    need change.
  - `[, j] single column` returns realized by default
    `drop=TRUE`. (no change need)

### Initial 
- define a new class, SQLDataFrame, DO NOT extend `DataFrame`, save
  `tbl_dbi` object as one separate slot.
- define accessors and basic methods: dbname, dbtable, dbkey,
  rownames, colnames, nrow, ncol, dim, length ...
- define `show,SQLDataFrame` to work as `show,DataFrame`. Ignore the
  existing internal functions from `DataFrame`, including
  `extractROWS`, `as.list`, `lapply`...

**slots**
- add extra slots `@indexes` in `SQLDataFrame` to save the row/col
  indexes.
- ?? remove the `@colnames` slot? and keep `colnames()` accessor?
  (consistent with `DataFrame`)
- renamed the `SQLDataFrame@rownames` slot into `dbrownames`.

**validity check**
- validity check for `dbtable()` name. 
- validity check for the length of `@indexes` slot.

**constructor**
- update `SQLDataFrame()` constructor for `@indexes` slot.
- update `SQLDataFrame()` constructor with specified columns and error
  message for "col.names" argument.

**accessors**
- update accessors of `nrow()`, `ncol()`, `dim()`, `length()`,
  `colnames()`, `rownames()` to reflect the `@indexes` slot.

**show**
- add utility function `.extract_tbl_from_SQLDataFrame()` to return
  `tbl_dbi` object with row/col filter/selection from `@indexes`.
- **???** add utility function `.extract_tbl_rows_by_key()` to extract
  certain rows by key. Need to rewrite, by removing the call of
  `dbkey(x)`.
- update `show,SQLDataFrame` to reflect the row/col indexes.


**[, [[**
- add `extractROWS,SQLDataFrame`, with both input and output to be
  `SQLDataFrame` object.
- define `[[,SQLDataFrame` to return `SQLDataFrame` object. Only for
  single column extraction and do realize automatically. (works like
  "drop=TRUE")
- define `$,SQLDataFrame` method, which calls `[[,SQLDataFrame`. 
- define `[,SQLDataFrame` to return `SQLDataFrame` object by
  adding/updating `@indexes` slot.
